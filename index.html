<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Malla Curricular Interactiva</title>
<style>
  #malla {
    font-family: Arial, sans-serif;
    max-width: 900px;
    margin: auto;
  }
  #anio {
    margin-bottom: 30px;
  }
  .semestre {
    border: 1px solid #2e8b57;
    margin: 10px 0;
    padding: 10px;
    background-color: #e8f5e9;
  }
  .ramo {
    padding: 6px 10px;
    margin: 4px 0;
    cursor: pointer;
    border-radius: 5px;
    user-select: none;
    transition: background-color 0.3s;
  }
  .ramo:hover {
    background-color: #c8e6c9;
  }
  .aprobado {
    text-decoration: line-through;
    background-color: #a5d6a7;
    color: #2e7d32;
  }
  .bloqueado {
    color: #bbb;
    cursor: not-allowed;
    background-color: #f0f0f0;
  }
</style>
</head>
<body>

<h1>Malla Curricular Interactiva</h1>
<div id="malla"></div>

<script>
const malla = [
  {
    anio: "Primer Año",
    semestres: [
      {
        semestre: "Primer Semestre",
        ramos: [
          { id: "Parv111", nombre: "Parv 111 - Bases Socio Antropológicas y Filosóficas de la Educación" },
          { id: "Parv112", nombre: "Parv 112 - Infancia y Transformaciones de la Modernidad" },
          { id: "Parv113", nombre: "Parv 113 - Desarrollo Personal, Emocionalidad y Autorregulación" },
          { id: "Parv114", nombre: "Parv 114 - Lenguaje y Cognición" },
          { id: "Parv115", nombre: "Parv 115 - Fundamentos y Práctica de la Educación Parvularia" },
          { id: "Parv116", nombre: "Parv 116 - Sensibilidad, Creatividad y Lenguajes Expresivos" },
          { id: "Parv117", nombre: "Parv 117 - Biología Humana" },
        ]
      },
      {
        semestre: "Segundo Semestre",
        ramos: [
          { id: "Parv121", nombre: "Parv 121 - Teorías de la Educación y Corrientes Pedagógicas Contemporáneas" },
          { id: "Parv122", nombre: "Parv 122 - Ética, Valores y Ciudadanía" },
          { id: "Parv123", nombre: "Parv 123 - Construcción de la Identidad Profesional" },
          { id: "Parv124", nombre: "Parv 124 - Lenguajes Artísticos", requisitos: ["Parv116"] },
          { id: "Parv125", nombre: "Parv 125 - Profesionalismo y Práctica Inicial I", requisitos: ["Parv115"] },
          { id: "Parv126", nombre: "Parv 126 - Bases Neurobiológicas del Ser Humano", requisitos: ["Parv117"] },
          { id: "Parv127", nombre: "Parv 127 - Psicología General y del Desarrollo" },
        ]
      },
    ]
  },
  {
    anio: "Segundo Año",
    semestres: [
      {
        semestre: "Tercer Semestre",
        ramos: [
          { id: "Parv211", nombre: "Parv 211 - Currículum en Educación" },
          { id: "Parv212", nombre: "Parv 212 - Psicología del Aprendizaje", requisitos: ["Parv127"] },
          { id: "Parv213", nombre: "Parv 213 - Liderazgo y Gestión de Organizaciones" },
          { id: "Parv214", nombre: "Parv 214 - Didáctica de los Lenguajes Artísticos", requisitos: ["Parv124"] },
          { id: "Parv216", nombre: "Parv 216 - Didáctica del Desarrollo Personal y Oscila", requisitos: ["Parv115"] },
          { id: "Parv215", nombre: "Parv 215 - Profesionalismo y Práctica Inicial II", requisitos: ["Parv125"] },
          { id: "Parv217", nombre: "Parv 217 - Salud y Desarrollo Humano" },
          { id: "Parv218", nombre: "Parv 218 - Taller de Nivelación de Inglés" },
        ]
      },
      {
        semestre: "Cuarto Semestre",
        ramos: [
          { id: "Parv221", nombre: "Parv 221 - Evaluación Educativa", requisitos: ["Parv211"] },
          { id: "Parv222", nombre: "Parv 222 - Lenguaje y Comunicación" },
          { id: "Parv223", nombre: "Parv 223 - Familia y Derechos de Familia" },
          { id: "Parv224", nombre: "Parv 224 - Didáctica para la Comprensión del Entorno Natural", requisitos: ["Parv211"] },
          { id: "Parv226", nombre: "Parv 226 - Motricidad Infantil" },
          { id: "Parv227", nombre: "Parv 227 - Profesionalismo y Práctica Intermedia I", requisitos: ["Parv215"] },
          { id: "Parv225", nombre: "Parv 225 - Salud en la Primera Infancia" },
          { id: "Parv228", nombre: "Parv 228 - Promoción de la Salud", requisitos: ["Parv217"] },
        ]
      },
    ]
  },
  // Más años y semestres aquí ...
];

// Set para almacenar ramos aprobados
const aprobados = new Set();

// Función que verifica prerrequisitos
function puedeAprobar(ramo) {
  if (!ramo.requisitos) return true;
  return ramo.requisitos.every(req => aprobados.has(req));
}

// Renderizamos la malla
function renderMalla() {
  const contenedor = document.getElementById("malla");
  contenedor.innerHTML = "";

  malla.forEach(anio => {
    const anioDiv = document.createElement("div");
    anioDiv.id = "anio";

    const anioTitulo = document.createElement("h2");
    anioTitulo.textContent = anio.anio;
    anioDiv.appendChild(anioTitulo);

    anio.semestres.forEach(sem => {
      const semestreDiv = document.createElement("div");
      semestreDiv.classList.add("semestre");

      const titulo = document.createElement("h3");
      titulo.textContent = sem.semestre;
      semestreDiv.appendChild(titulo);

      sem.ramos.forEach(ramo => {
        const ramoDiv = document.createElement("div");
        ramoDiv.classList.add("ramo");
        ramoDiv.textContent = ramo.nombre;
        ramoDiv.dataset.id = ramo.id;

        if (aprobados.has(ramo.id)) {
          ramoDiv.classList.add("aprobado");
          ramoDiv.title = "Ramo aprobado. Haz clic para desmarcar.";
        } else if (!puedeAprobar(ramo)) {
          ramoDiv.classList.add("bloqueado");
          ramoDiv.title = "Debe aprobar prerrequisitos primero";
        } else {
          ramoDiv.title = "Haz clic para aprobar";
        }

        ramoDiv.addEventListener("click", () => {
          if (aprobados.has(ramo.id)) {
            aprobados.delete(ramo.id);
          } else if (puedeAprobar(ramo)) {
            aprobados.add(ramo.id);
          }
          renderMalla();
        });

        semestreDiv.appendChild(ramoDiv);
      });

      anioDiv.appendChild(semestreDiv);
    });

    contenedor.appendChild(anioDiv);
  });
}

document.addEventListener("DOMContentLoaded", renderMalla);
</script>

</body>
</html>
